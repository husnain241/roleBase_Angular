<div class="admin-dashboard-container">
  <div class="admin-container">
    <h2>Admin Management Panel</h2>
    <p>Manage all registered users below.</p>
    <div class="search-container">
      <span class="search-icon">ğŸ”</span>
      <input
        type="text"
        placeholder="Search users by name or email..."
        [(ngModel)]="searchQuery"
        class="search-input"
      />
    </div>

    <table *ngIf="!isLoading()" class="user-table">
      <tbody>
        <tr *ngFor="let user of filteredUsers()">
          <td>{{ user.username }}</td>
          <td>{{ user.email }}</td>
          <td>
            <span class="badge">{{ user.role }}</span>
          </td>
          <td>
            <button (click)="removeUser(user.id)" class="btn-delete">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="filteredUsers().length === 0 && !isLoading()" class="no-results">
      No users found matching "{{ searchQuery() }}"
    </div>

    <div *ngIf="isLoading()" class="loader-overlay">
      <app-loading-spinner></app-loading-spinner> Fetching Users...
    </div>
  </div>

  <div class="dashboard-grid">
    <!-- Stats Cards -->

    <!-- Actions Panel -->
    <div class="actions-panel">
      <h2>Quick Actions</h2>
      <div class="action-buttons">
        <button class="action-btn primary" (click)="toggleModal()">
          <span class="btn-icon">â•</span>
          Create User
        </button>
        <button class="action-btn">
          <span class="btn-icon">ğŸ‘¥</span>
          Manage Users
        </button>
        <button class="action-btn">
          <span class="btn-icon">ğŸ”</span>
          Manage Roles
        </button>
        <button class="action-btn">
          <span class="btn-icon">ğŸ“Š</span>
          View Reports
        </button>
      </div>
    </div>

    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">ğŸ‘¥</div>
        <div class="stat-info">
          <h3>Total Users</h3>
          <p class="stat-value">{{ totalUsers() }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">ğŸ›¡ï¸</div>
        <div class="stat-info">
          <h3>Admins</h3>
          <p class="stat-value">{{ adminCount() }}</p>
        </div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">ğŸ‘¤</div>
        <div class="stat-info">
          <h3>Standard Users</h3>
          <p class="stat-value">{{ userCount() }}</p>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- //////////////model///// -->
<div class="modal-overlay" *ngIf="showCreateModal()">
  <div class="modal-content">
    <h3>Create New User</h3>
    <form (ngSubmit)="onCreateUser()">
      <div class="form-group">
        <label>Username</label>
        <input type="text" [(ngModel)]="newUser.username" name="username" required />
      </div>
      <div class="form-group">
        <label>Email</label>
        <input type="email" [(ngModel)]="newUser.email" name="email" required />
      </div>
      <div class="form-group">
        <label>Role</label>
        <select [(ngModel)]="newUser.role" name="role">
          <option value="USER">USER</option>
          <option value="ADMIN">ADMIN</option>
        </select>
      </div>
      <div class="modal-actions">
        <button type="button" (click)="toggleModal()" class="btn-cancel">Cancel</button>
        <button type="submit" class="btn-save">Save User</button>
      </div>
    </form>
  </div>
</div>
